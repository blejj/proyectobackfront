<app-navbar></app-navbar>

<div class="perfil-container">
 
  <h2>Mi Perfil</h2>

  <div *ngIf="isLoading">Cargando datos...</div>
  <div *ngIf="error" class="error">{{ error }}</div>
  <div *ngIf="success" class="success">{{ success }}</div>

  <div *ngIf="usuario && !isLoading" class="perfil-info">

    <!-- Campo: Nombre -->
    <div class="dato">
      <strong>Nombre:</strong>
      <ng-container *ngIf="editandoCampo === 'nombre'; else mostrarNombre">
        <input [(ngModel)]="usuario.nombre" (blur)="guardarCampo('nombre')" autofocus>
      </ng-container>
      <ng-template #mostrarNombre>
        {{ usuario.nombre }}
        <button type="button" (click)="activarEdicion('nombre')">✏️</button>
      </ng-template>
    </div>

    <!-- Apellido -->
    <div class="dato">
      <strong>Apellido:</strong>
      <ng-container *ngIf="editandoCampo === 'apellido'; else mostrarApellido">
        <input [(ngModel)]="usuario.apellido" (blur)="guardarCampo('apellido')" autofocus>
      </ng-container>
      <ng-template #mostrarApellido>
        {{ usuario.apellido }}
        <button type="button" (click)="activarEdicion('apellido')">✏️</button>
      </ng-template>
    </div>

    <!-- Teléfono -->
    <div class="dato">
      <strong>Teléfono:</strong>
      <ng-container *ngIf="editandoCampo === 'telefono'; else mostrarTelefono">
        <input [(ngModel)]="usuario.telefono" (blur)="guardarCampo('telefono')" autofocus>
      </ng-container>
      <ng-template #mostrarTelefono>
        {{ usuario.telefono }}
        <button type="button" (click)="activarEdicion('telefono')">✏️</button>
      </ng-template>
    </div>

    <!-- Dirección -->
    <div class="dato">
      <strong>Dirección:</strong>
      <ng-container *ngIf="editandoCampo === 'direccion'; else mostrarDireccion">
        <input [(ngModel)]="usuario.direccion" (blur)="guardarCampo('direccion')" autofocus>
      </ng-container>
      <ng-template #mostrarDireccion>
        {{ usuario.direccion }}
        <button type="button" (click)="activarEdicion('direccion')">✏️</button>
      </ng-template>
    </div>

    <!-- DNI -->
    <div class="dato">
      <strong>DNI:</strong>
      <ng-container *ngIf="editandoCampo === 'dni'; else mostrarDni">
        <input [(ngModel)]="usuario.dni" (blur)="guardarCampo('dni')" autofocus>
      </ng-container>
      <ng-template #mostrarDni>
        {{ usuario.dni }}
        <button type="button" (click)="activarEdicion('dni')">✏️</button>
      </ng-template>
    </div>

  </div>
</div>
